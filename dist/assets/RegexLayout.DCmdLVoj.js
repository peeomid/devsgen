import{j as e}from"./jsx-runtime.9DypCmAh.js";import{r as n}from"./index.eCxJ45ll.js";import{u as y}from"./index.et05KHOM.js";import{a as C}from"./AnalyticsService.CwF1QyvA.js";import{s as S,t as w,p as P,u as R,a as E,r as F,c as B,b as N,e as O,f as T,g as M,h as A}from"./patternStore.FWnDXKzq.js";import"./index.Bda8kKQR.js";const H=n.forwardRef(({value:t,onChange:a,placeholder:u="Enter text to transform... (⌘1 to focus)",disabled:d=!1,onTransform:o},h)=>{const[l,x]=n.useState(!1),m=n.useRef(null);return n.useImperativeHandle(h,()=>({focus:()=>{m.current&&m.current.focus()},selectAll:()=>{m.current&&(m.current.focus(),m.current.select())}})),n.useEffect(()=>{if(typeof window>"u")return;const i=c=>{(c.metaKey||c.ctrlKey)&&c.key==="Enter"&&o&&(c.preventDefault(),o())};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[o]),n.useEffect(()=>{const i=m.current;i&&(i.style.height="auto",i.style.height=`${i.scrollHeight}px`)},[t]),n.useEffect(()=>{if(typeof window>"u")return;const i=m.current;i&&setTimeout(()=>{i.focus()},100)},[]),e.jsxs("div",{className:`relative rounded-md border ${l?"border-primary":"border-gray-300"} transition-colors`,children:[e.jsxs("div",{className:"absolute top-0 right-0 p-2 text-xs text-gray-500",children:[t.length," characters"]}),e.jsx("textarea",{ref:m,value:t,onChange:i=>a(i.target.value),onFocus:()=>x(!0),onBlur:()=>x(!1),placeholder:u,disabled:d,className:"w-full h-full min-h-[200px] p-4 font-mono text-sm resize-y rounded-md focus:outline-none",spellCheck:!1,"aria-label":"Input text",title:"Input area (⌘1 to focus)","data-testid":"input-textarea"}),o&&e.jsx("div",{className:"absolute bottom-2 right-2",children:e.jsxs("button",{onClick:o,disabled:d||!t.trim(),className:"bg-primary text-white px-3 py-1 rounded-md text-sm font-medium hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center","aria-label":"Transform text",children:["Transform",e.jsx("span",{className:"ml-2 text-xs opacity-75",children:"⌘+↵"})]})})]})}),z=n.forwardRef(({value:t,executionTime:a,isLoading:u=!1,error:d=null,onCopy:o,onChange:h},l)=>{const[x,m]=n.useState(!1),i=n.useRef(null);n.useImperativeHandle(l,()=>({focus:()=>{i.current&&i.current.focus()},selectAll:()=>{i.current&&(i.current.focus(),i.current.select())},copyToClipboard:async()=>await c()})),n.useEffect(()=>{let s;return x&&(s=setTimeout(()=>m(!1),2e3)),()=>clearTimeout(s)},[x]);const c=async()=>{try{return await navigator.clipboard.writeText(t),m(!0),o&&o(),C.copyActionPerformed("output","button"),!0}catch(s){return console.error("Failed to copy text:",s),!1}},[j,b]=n.useState(!1);return e.jsxs("div",{className:`relative rounded-md border ${j?"border-primary":"border-gray-300"} transition-colors`,children:[e.jsxs("div",{className:"absolute top-0 right-0 p-2 text-xs text-gray-500",children:[t.length," characters",a!==void 0&&e.jsxs("span",{className:"ml-3",children:[a.toFixed(2),"ms"]})]}),e.jsxs("div",{className:"relative",children:[u&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-70 flex items-center justify-center z-10",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}),d?e.jsx("div",{className:"p-4 text-error font-mono text-sm whitespace-pre-wrap",children:d}):e.jsx("textarea",{ref:i,className:"w-full h-full min-h-[200px] p-4 font-mono text-sm resize-y rounded-md focus:outline-none",value:t,onChange:h?s=>h(s.target.value):void 0,onFocus:()=>b(!0),onBlur:()=>b(!1),placeholder:"Output will appear here... (⌘2 to focus)",spellCheck:!1,"aria-label":"Output text",title:"Output area (⌘2 to focus)","data-testid":"output-textarea"})]}),e.jsx("div",{className:"absolute bottom-2 right-2",children:e.jsx("button",{onClick:c,disabled:u||!t||!!d,className:"bg-blue-50 text-blue-700 hover:bg-blue-100 px-3 py-1 rounded-md text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center","aria-label":"Copy to clipboard",children:x?e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy",e.jsx("span",{className:"ml-2 text-xs opacity-75",children:"⌘⇧C"})]})})})]})});function W(){const t=y(P),a=y(R),[u,d]=n.useState(""),[o,h]=n.useState([]),[l,x]=n.useState(0),m=n.useRef(null),i=n.useRef(null);n.useEffect(()=>{if(!u.trim()){h(t);return}const s=u.toLowerCase(),f=/^\d+$/.test(s);if(f){const g=parseInt(s,10),v=t.find(D=>D.keyNumber===g);if(v){h([v]),x(0);return}}const p=t.filter(g=>g.shortKeys.some(v=>v.toLowerCase()===s));if(p.length>0){h(p),x(0);return}const r=t.filter(g=>g.name.toLowerCase().includes(s)||g.description.toLowerCase().includes(s)||g.category?.toLowerCase().includes(s)||g.tags.some(v=>v.toLowerCase().includes(s))||g.shortKeys.some(v=>v.toLowerCase().includes(s))||f&&g.keyNumber.toString().includes(s));h(r),x(0)},[u,t]),n.useEffect(()=>{a.isCommandPaletteOpen&&m.current?setTimeout(()=>{m.current?.focus()},10):(d(""),x(0))},[a.isCommandPaletteOpen]);const[c,j]=n.useState([]);n.useEffect(()=>{const s=o.map((f,p)=>({pattern:f,index:p}));j(s),l>=s.length?x(s.length>0?0:-1):s.length>0&&l<0&&x(0)},[o]);const b=s=>{switch(s.key){case"ArrowDown":s.preventDefault(),c.length>0&&x((l+1)%c.length);break;case"ArrowUp":s.preventDefault(),c.length>0&&x((l-1+c.length)%c.length);break;case"Enter":s.preventDefault(),c.length>0&&l>=0&&l<c.length&&(S(c[l].pattern.id),w());break;case"Escape":s.preventDefault(),w();break}};return n.useEffect(()=>{if(i.current&&c.length>0&&l>=0&&c[l]){const s=c[l].pattern.id,f=i.current.querySelector(`li[data-pattern-id="${s}"]`);f&&f.scrollIntoView({block:"nearest",behavior:"smooth"})}},[l,c]),n.useEffect(()=>{const s=f=>{const p=f.target;a.isCommandPaletteOpen&&!p.closest(".command-palette-content")&&w()};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[a.isCommandPaletteOpen]),a.isCommandPaletteOpen?e.jsx("div",{className:"command-palette",children:e.jsxs("div",{className:"command-palette-content",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{ref:m,type:"text",value:u,onChange:s=>d(s.target.value),onKeyDown:b,placeholder:"Search for a pattern...",className:"w-full outline-none text-lg",autoComplete:"off","aria-label":"Search patterns"}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[e.jsx("span",{className:"shortcut-hint",children:"↑↓"}),e.jsx("span",{children:"to navigate"}),e.jsx("span",{className:"shortcut-hint",children:"↵"}),e.jsx("span",{children:"to select"}),e.jsx("span",{className:"shortcut-hint",children:"Esc"}),e.jsx("span",{children:"to close"})]})]}),e.jsx("ul",{ref:i,className:"max-h-[60vh] overflow-y-auto",role:"listbox",children:o.length===0?e.jsx("li",{className:"px-4 py-3 text-gray-500",children:"No patterns found"}):o.map((s,f)=>e.jsx("li",{role:"option","data-pattern-id":s.id,"aria-selected":f===l,className:`px-4 py-3 cursor-pointer ${f===l?"bg-blue-50":"hover:bg-gray-50"}`,onClick:()=>{S(s.id),w()},children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-200 text-gray-800 mr-2",children:s.keyNumber}),e.jsx("h3",{className:"font-medium text-gray-900",children:s.name})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.description}),s.shortKeys.length>0&&e.jsx("div",{className:"flex mt-1 gap-1",children:s.shortKeys.map(p=>e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:p},p))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs text-gray-500 mr-2",children:s.category}),s.isBuiltIn&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:"Built-in"})]})]})},s.id))})]})}):null}function L({pattern:t}){const a=y(E),u=()=>{const l=document.getElementById("regex-search-input");l&&l.focus()},d=()=>{F()},o=()=>t?a?e.jsxs("div",{className:"flex items-center","data-testid":"pattern-selector-modified",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{className:"text-orange-700 font-medium",children:"Custom Regex"}),e.jsxs("span",{className:"text-gray-500 ml-1",children:["(based on ",e.jsx("span",{"data-testid":"pattern-base-name",children:t.name}),")"]})]}):e.jsxs("div",{className:"flex items-center","data-testid":"pattern-selector-active",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"text-gray-900 font-medium","data-testid":"pattern-name",children:t.name}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-200 text-gray-800 ml-2","data-testid":"pattern-key",children:t.keyNumber})]}):e.jsx("div",{className:"flex items-center","data-testid":"pattern-selector-empty",children:e.jsx("span",{className:"text-gray-500",children:"No pattern selected"})}),h=()=>{const l=e.jsxs("button",{onClick:()=>w(),className:"bg-blue-50 text-blue-700 hover:bg-blue-100 px-3 py-1 rounded-md text-sm font-medium flex items-center",title:"Find pattern","data-testid":"find-pattern-button",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Find",e.jsx("span",{className:"ml-2 text-xs opacity-75",children:"⌘K"})]});return t?a?e.jsxs("div",{className:"flex gap-2",children:[l,e.jsxs("button",{onClick:d,className:"bg-gray-50 text-gray-700 hover:bg-gray-100 px-3 py-1 rounded-md text-sm font-medium flex items-center",title:"Reset to original pattern","data-testid":"reset-pattern-button",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset"]})]}):e.jsxs("div",{className:"flex gap-2",children:[l,e.jsxs("button",{onClick:u,className:"bg-orange-50 text-orange-700 hover:bg-orange-100 px-3 py-1 rounded-md text-sm font-medium flex items-center",title:"Edit pattern","data-testid":"edit-pattern-button",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit",e.jsx("span",{className:"ml-2 text-xs opacity-75",children:"⌘E"})]})]}):e.jsx("div",{className:"flex gap-2",children:l})};return e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-3 mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[o(),h()]})})}function I({pattern:t}){const a=y(B),u=y(E),[d,o]=n.useState(""),[h,l]=n.useState(""),[x,m]=n.useState(""),[i,c]=n.useState("");n.useEffect(()=>{u&&a.searchRegex?(o(a.searchRegex),l(a.replaceRegex),m(a.flags||"")):t?(o(t.searchRegex),l(t.replaceRegex),m(t.flags||"")):(o(""),l(""),m("")),c("")},[t,a,u]);const j=r=>{if(!r.trim())return null;try{return new RegExp(r),null}catch(g){return g instanceof Error?g.message:"Invalid regex"}},b=r=>{o(r);const g=j(r);c(g||""),t&&r!==t.searchRegex&&N(r,h,x||void 0)},s=r=>{l(r),t&&(d!==t.searchRegex||r!==t.replaceRegex)&&N(d,r,x||void 0)},f=r=>{m(r),t&&(d!==t.searchRegex||h!==t.replaceRegex||r!==(t.flags||""))&&N(d,h,r||void 0)},p=!t&&!d&&!h&&!x;return e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"regex-search-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Regex"}),e.jsx("input",{id:"regex-search-input",type:"text",value:d,onChange:r=>b(r.target.value),className:`w-full p-3 border rounded-md font-mono text-sm ${i?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Enter search regex pattern...","data-testid":"search-regex-input"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"regex-replace-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Replace Pattern"}),e.jsx("input",{id:"regex-replace-input",type:"text",value:h,onChange:r=>s(r.target.value),className:"w-full p-3 border border-gray-300 rounded-md font-mono text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter replacement pattern...","data-testid":"replace-regex-input"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"regex-flags-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Flags (optional)"}),e.jsx("input",{id:"regex-flags-input",type:"text",value:x,onChange:r=>f(r.target.value),className:"w-full p-3 border border-gray-300 rounded-md font-mono text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., g, i, m","data-testid":"regex-flags-input"})]}),i&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:i})}),p&&e.jsxs("div",{className:"text-center py-6",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Select a pattern or enter custom regex above"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Use ⌘K to find patterns"})]})]})})}function k({title:t,defaultExpanded:a=!1,children:u}){const[d,o]=n.useState(a);return e.jsxs("div",{className:"border-t border-gray-100 pt-3 mt-3",children:[e.jsxs("button",{onClick:()=>o(!d),className:"flex w-full justify-between items-center text-left focus:outline-none group","aria-expanded":d,children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:t}),e.jsx("span",{className:"text-gray-500 group-hover:text-gray-700 transition-colors",children:d?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),d&&e.jsx("div",{className:"mt-2 transition-all duration-200 ease-in-out",children:u})]})}function K({pattern:t,isMobile:a=!1}){const[u,d]=n.useState(!1);return e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("div",{className:"flex items-center",children:[a&&e.jsx("button",{onClick:()=>d(!u),className:"text-gray-500 hover:text-gray-700 p-1 mr-1","aria-label":"Toggle details",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:u?"M19 9l-7 7-7-7":"M9 5l7 7-7 7"})})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:t.name}),a&&t.category&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 ml-2",children:t.category})]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Reference"})]}),!a&&t.category&&e.jsx("div",{className:"text-sm text-gray-500 mb-2",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.category})}),e.jsx("p",{className:"text-gray-700",children:t.description}),t.shortKeys&&t.shortKeys.length>0&&e.jsx("div",{className:"flex mt-2 gap-1",children:t.shortKeys.map(o=>e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:o},o))})]}),t.example&&(!a||a&&u)&&e.jsx(k,{title:"Example",defaultExpanded:!a,children:e.jsxs("div",{className:"mb-2 last:mb-0",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Input:"}),e.jsx("code",{className:"block p-2 bg-white rounded text-sm font-mono overflow-x-auto border",children:t.example.input}),e.jsx("div",{className:"text-xs text-gray-500 mt-2 mb-1",children:"Output:"}),e.jsx("code",{className:"block p-2 bg-white rounded text-sm font-mono overflow-x-auto border",children:t.example.output})]})}),(t.searchRegex||t.replaceRegex||t.flags)&&(!a||a&&u)&&e.jsxs(k,{title:"Original Pattern",defaultExpanded:!a,children:[t.searchRegex&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Search:"}),e.jsx("code",{className:"block p-2 bg-white rounded text-sm font-mono overflow-x-auto border",children:t.searchRegex})]}),t.replaceRegex&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Replace:"}),e.jsx("code",{className:"block p-2 bg-white rounded text-sm font-mono overflow-x-auto border",children:t.replaceRegex})]}),t.flags&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Flags:"}),e.jsx("code",{className:"block p-2 bg-white rounded text-sm font-mono overflow-x-auto border",children:t.flags})]})]}),t.tags&&t.tags.length>0&&(!a||a&&u)&&e.jsx(k,{title:"Tags",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(o=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:o},o))})})]})}function G(){const t=y(T);y(R);const a=y(P),u=y(M),d=y(E),[o,h]=n.useState(null),[l,x]=n.useState(""),[m,i]=n.useState(""),c=n.useRef(null),j=n.useRef(null),b=n.useRef(Date.now());n.useEffect(()=>(C.toolSessionStarted("regex-find-replace"),b.current=Date.now(),()=>{const f=Math.floor((Date.now()-b.current)/1e3);C.toolSessionDuration("regex-find-replace",f)}),[]),n.useEffect(()=>{if(typeof window>"u")return;O();const f=localStorage.getItem("regex_input");f&&x(f);const p=r=>{if((r.metaKey||r.ctrlKey)&&r.key.toLowerCase()==="k"&&(r.preventDefault(),R.setKey("isCommandPaletteOpen",!0)),(r.metaKey||r.ctrlKey)&&r.key==="1"&&(r.preventDefault(),c.current&&c.current.focus()),(r.metaKey||r.ctrlKey)&&r.key==="2"&&(r.preventDefault(),j.current&&j.current.focus()),(r.metaKey||r.ctrlKey)&&r.shiftKey&&r.key.toLowerCase()==="c"&&(r.preventDefault(),j.current&&j.current.copyToClipboard()),(r.metaKey||r.ctrlKey)&&r.key.toLowerCase()==="e"){r.preventDefault();const g=document.getElementById("regex-search-input");g&&g.focus()}};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[]),n.useEffect(()=>{if(!(typeof window>"u"))if(u&&a.length>0){const f=a.find(p=>p.id===u);h(f||null),localStorage.setItem("regex_selected_pattern",u),setTimeout(()=>{c.current&&c.current.selectAll()},100)}else h(null)},[u,a]);const s=()=>{l.trim()&&(localStorage.setItem("regex_input",l),A(l),setTimeout(()=>{j.current&&(j.current.focus(),j.current.selectAll())},100))};return n.useEffect(()=>{t.result?.output!==void 0&&i(t.result.output)},[t.result?.output]),n.useEffect(()=>{typeof window>"u"||l&&localStorage.setItem("regex_input",l)},[l]),n.useEffect(()=>{typeof window>"u"||a.length>0&&l.trim()&&!t.result&&setTimeout(()=>{s()},300)},[a,l,t.result]),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"lg:grid lg:grid-cols-[1fr,400px] lg:gap-6 space-y-6 lg:space-y-0",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Input"}),e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(⌘1 to focus)"})]})}),e.jsx(H,{ref:c,value:l,onChange:x,onTransform:s,disabled:t.isProcessing})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Output"}),e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(⌘2 to focus)"})]})}),e.jsx(z,{ref:j,value:m,onChange:i,executionTime:t.result?.executionTime,isLoading:t.isProcessing,error:t.error})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(L,{pattern:o}),e.jsx(I,{pattern:o}),o&&!d&&e.jsx(K,{pattern:o,isMobile:!1})]})}),e.jsxs("div",{className:"lg:hidden space-y-4",children:[e.jsx(L,{pattern:o}),e.jsx(I,{pattern:o}),o&&!d&&e.jsx(K,{pattern:o,isMobile:!0})]})]}),e.jsx(W,{})]})}export{G as default};
