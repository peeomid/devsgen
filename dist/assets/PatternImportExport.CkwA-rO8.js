import{j as e}from"./jsx-runtime.ClP7wGfN.js";import{r as n}from"./index.DK-fsZOb.js";import{P as N,a as l}from"./AnalyticsService.CwF1QyvA.js";const u=new N;function P(){const[i,h]=n.useState(!1),[o,j]=n.useState(!1),[c,p]=n.useState(""),[m,g]=n.useState(""),[r,d]=n.useState(null),[x,s]=n.useState(null),y=()=>{typeof window<"u"&&(window.location.href="/tools/regex-find-replace/create")},f=async()=>{if(s(null),d(null),!c.trim()){s("Please enter JSON data to import");return}try{const t=await u.importPatterns(c);p(""),s(null);const a={success:!0,imported:t?.imported||1,skipped:t?.skipped||0};d(a),l.patternsImported(a.imported,"json_paste")}catch(t){s(t instanceof Error?t.message:"Failed to import patterns"),d({success:!1,imported:0,skipped:0,errors:[t instanceof Error?t.message:"Unknown error"]})}},b=async()=>{try{const t=await u.exportPatterns();g(t),s(null);try{const a=JSON.parse(t),w=Array.isArray(a)?a.length:1;l.patternsExported(w,"json_copy")}catch{l.patternsExported(1,"json_copy")}}catch(t){s(t instanceof Error?t.message:"Failed to export patterns")}},v=async()=>{try{await navigator.clipboard.writeText(m),l.copyActionPerformed("pattern_json","button")}catch{s("Failed to copy to clipboard")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Pattern Management"}),e.jsxs("button",{onClick:y,className:"flex items-center px-3 py-1.5 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100",title:"Create a new pattern",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Pattern"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Import Patterns"}),e.jsx("button",{onClick:()=>h(!i),className:"text-sm text-primary hover:text-blue-700",children:i?"Cancel":"Import Patterns"})]}),i&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paste JSON data containing patterns to import. This will add new patterns to your collection."}),e.jsx("textarea",{value:c,onChange:t=>p(t.target.value),className:"w-full h-32 p-2 border border-gray-300 rounded-md font-mono text-sm",placeholder:'[{"id": "example", "name": "Example Pattern", ...}]'}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:f,className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-blue-600",children:"Import"})}),r&&e.jsx("div",{className:`p-3 rounded-md ${r.success?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:r.success?e.jsxs("p",{children:["Successfully imported ",r.imported," patterns"]}):e.jsxs("div",{children:[e.jsx("p",{children:"Failed to import patterns"}),r.errors&&r.errors.length>0&&e.jsx("ul",{className:"list-disc list-inside mt-1 text-sm",children:r.errors.map((t,a)=>e.jsx("li",{children:t},a))})]})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Export Patterns"}),e.jsx("button",{onClick:()=>{j(!o),o||b()},className:"text-sm text-primary hover:text-blue-700",children:o?"Cancel":"Export Patterns"})]}),o&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Your custom patterns are shown below in JSON format. Copy this data to save or share your patterns."}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:m,readOnly:!0,className:"w-full h-32 p-2 border border-gray-300 rounded-md font-mono text-sm"}),e.jsx("button",{onClick:v,className:"absolute top-2 right-2 bg-gray-100 hover:bg-gray-200 text-gray-700 p-1 rounded",title:"Copy to clipboard",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]})]}),x&&e.jsx("div",{className:"p-3 bg-red-50 text-red-800 rounded-md",children:x})]})}export{P as default};
