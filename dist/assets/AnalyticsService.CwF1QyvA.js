class p{storageKey="regex-patterns";isBrowser;constructor(){this.isBrowser=typeof window<"u"}async getAllPatterns(){if(!this.isBrowser)return[];try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading patterns from localStorage:",e),[]}}savePattern(e){if(!this.isBrowser)return!1;try{const t=this.getPatterns(),r=t.findIndex(a=>a.id===e.id);return r>=0?t[r]={...e,updatedAt:new Date().toISOString()}:t.push({...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),localStorage.setItem(this.storageKey,JSON.stringify(t)),!0}catch(t){return console.error("Error saving pattern to localStorage:",t),!1}}deletePattern(e){if(!this.isBrowser)return!1;try{const t=this.getPatterns(),r=t.filter(a=>a.id!==e);return t.length===r.length?!1:(localStorage.setItem(this.storageKey,JSON.stringify(r)),!0)}catch(t){return console.error("Error deleting pattern from localStorage:",t),!1}}async importPatterns(e){if(!this.isBrowser)return{success:!1,imported:0,skipped:0,errors:["Cannot import patterns in server environment"]};try{const t={success:!1,imported:0,skipped:0,errors:[]};let r;try{r=JSON.parse(e)}catch{return t.errors=["Invalid JSON format"],t}if(!Array.isArray(r))return t.errors=["Imported data is not an array"],t;const a=this.getPatterns();for(const s of r){if(!this.isValidPattern(s)){t.skipped++,t.errors.push(`Invalid pattern: ${s.name||"Unnamed pattern"}`);continue}a.some(n=>n.id===s.id)?this.savePattern({...s,updatedAt:new Date().toISOString()}):this.savePattern({...s,isBuiltIn:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),t.imported++}return t.success=t.imported>0,t}catch(t){return console.error("Error importing patterns:",t),{success:!1,imported:0,skipped:0,errors:["Unknown error during import"]}}}exportPatterns(){if(!this.isBrowser)return"[]";try{const e=this.getPatterns();return JSON.stringify(e,null,2)}catch(e){return console.error("Error exporting patterns:",e),"[]"}}getPatterns(){if(!this.isBrowser)return[];try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting patterns from localStorage:",e),[]}}isValidPattern(e){return e&&typeof e=="object"&&typeof e.id=="string"&&typeof e.name=="string"&&typeof e.description=="string"&&typeof e.searchRegex=="string"&&typeof e.replaceRegex=="string"&&e.example&&typeof e.example.input=="string"&&typeof e.example.output=="string"}}const l=[{id:"path-dot-to-slash",keyNumber:1,shortKeys:["d2s","dot"],name:"Path: Dot to Slash",slug:"convert-dot-notation-to-slash-paths",description:"Transform dot notation import paths to slash notation - perfect for converting Python imports to file paths or switching between different module systems",category:"Format Conversion",searchRegex:"\\.",replaceRegex:"/",flags:"g",example:{input:"app.services.user",output:"app/services/user"},isBuiltIn:!0,featured:!0,tags:["path","conversion","dot notation"],createdAt:"2023-01-01T00:00:00.000Z",updatedAt:"2023-01-01T00:00:00.000Z"},{id:"path-slash-to-dot",keyNumber:2,shortKeys:["s2d","sla"],name:"Path: Slash to Dot",slug:"convert-slash-paths-to-dot-notation",description:"Transform file paths to dot notation imports - essential for converting directory structures to Python import statements or module references",category:"Format Conversion",searchRegex:"/",replaceRegex:".",flags:"g",example:{input:"app/services/user",output:"app.services.user"},isBuiltIn:!0,featured:!0,tags:["path","conversion","dot notation"],createdAt:"2023-01-01T00:00:00.000Z",updatedAt:"2023-01-01T00:00:00.000Z"},{id:"camel-to-kebab",keyNumber:3,shortKeys:["c2k","cam"],name:"CamelCase to kebab-case",slug:"camel-case-to-kebab-case",description:"Transform camelCase variable names to kebab-case for CSS classes, HTML attributes, or URL-friendly formats - essential for frontend developers",category:"Format Conversion",searchRegex:"([a-z])([A-Z])",replaceRegex:"$1-$2",flags:"g",example:{input:"myVariableName",output:"my-variable-name"},isBuiltIn:!0,featured:!0,tags:["case conversion","camelCase","kebab-case"],createdAt:"2023-01-01T00:00:00.000Z",updatedAt:"2023-01-01T00:00:00.000Z"},{id:"kebab-to-camel",keyNumber:4,shortKeys:["k2c","keb"],name:"kebab-case to camelCase",slug:"convert-kebab-case-to-camelcase",description:"Transform kebab-case CSS classes or HTML attributes to camelCase JavaScript variables - streamline your frontend development workflow",category:"Format Conversion",searchRegex:"-([a-z])",replaceRegex:"$1",flags:"g",example:{input:"my-variable-name",output:"myVariableName"},isBuiltIn:!0,tags:["case conversion","camelCase","kebab-case"],createdAt:"2023-01-01T00:00:00.000Z",updatedAt:"2023-01-01T00:00:00.000Z"},{id:"camel-to-snake",keyNumber:11,shortKeys:["c2s","sna"],name:"CamelCase to snake_case",slug:"camel-case-to-snake-case",description:"Transform camelCase JavaScript variables to snake_case for Python, Ruby, or database column names - perfect for cross-language development",category:"Format Conversion",searchRegex:"([a-z])([A-Z])",replaceRegex:"$1_$2",flags:"g",example:{input:"myVariableName",output:"my_variable_name"},isBuiltIn:!0,featured:!0,tags:["case conversion","camelCase","snake_case"],createdAt:"2023-01-01T00:00:00.000Z",updatedAt:"2023-01-01T00:00:00.000Z"},{id:"extract-urls",keyNumber:5,shortKeys:["url","ext"],name:"Extract URLs",slug:"extract-urls-from-text",description:"Quickly extract all HTTP and HTTPS URLs from any text - perfect for analyzing content, gathering links, or cleaning up documentation",category:"Text Extraction",searchRegex:"(https?://[^\\s,;!()]+)",replaceRegex:`$1
`,flags:"g",example:{input:"Visit https://example.com and https://test.com for more information.",output:`https://example.com
https://test.com
`},isBuiltIn:!0,featured:!0,tags:["extraction","url","web"],createdAt:"2023-01-01T00:00:00.000Z",updatedAt:"2023-01-01T00:00:00.000Z"},{id:"extract-emails",keyNumber:6,shortKeys:["eml","em"],name:"Extract Email Addresses",slug:"extract-email-addresses-from-text",description:"Find and extract all email addresses from any text content - ideal for data analysis, contact list building, or content scraping",category:"Text Extraction",searchRegex:"([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,})",replaceRegex:`$1
`,flags:"g",example:{input:"Contact john.doe@example.com or jane@test.co.uk for support.",output:`john.doe@example.com
jane@test.co.uk
`},isBuiltIn:!0,featured:!0,tags:["extraction","email","contact"],createdAt:"2023-01-01T00:00:00.000Z",updatedAt:"2023-01-01T00:00:00.000Z"},{id:"comma-to-newline",keyNumber:7,shortKeys:["c2n","com"],name:"Comma to Newline",slug:"convert-comma-separated-to-newlines",description:"Transform comma-separated lists into clean line-by-line format - perfect for converting CSV data to readable lists or preparing data for processing",category:"Format Conversion",searchRegex:",\\s*",replaceRegex:`
`,flags:"g",example:{input:"apple, banana, cherry, date",output:`apple
banana
cherry
date`},isBuiltIn:!0,tags:["list","conversion","csv"],createdAt:"2023-01-01T00:00:00.000Z",updatedAt:"2023-01-01T00:00:00.000Z"},{id:"newline-to-comma",keyNumber:8,shortKeys:["n2c","nl"],name:"Newline to Comma",slug:"convert-newlines-to-comma-separated",description:"Transform line-by-line lists into comma-separated format - ideal for creating CSV data, function parameters, or compact data representations",category:"Format Conversion",searchRegex:"\\n",replaceRegex:", ",flags:"g",example:{input:`apple
banana
cherry
date`,output:"apple, banana, cherry, date"},isBuiltIn:!0,tags:["list","conversion","csv"],createdAt:"2023-01-01T00:00:00.000Z",updatedAt:"2023-01-01T00:00:00.000Z"},{id:"add-quotes",keyNumber:9,shortKeys:["aq","quo"],name:"Add Quotes to Lines",slug:"add-quotes-to-each-line",description:"Wrap every line with double quotes - essential for converting plain text lists to string arrays, JSON data, or code snippets",category:"Code Formatting",searchRegex:"^(.+)$",replaceRegex:'"$1"',flags:"gm",example:{input:`apple
banana
cherry`,output:`"apple"
"banana"
"cherry"`},isBuiltIn:!0,tags:["quotes","formatting","code"],createdAt:"2023-01-01T00:00:00.000Z",updatedAt:"2023-01-01T00:00:00.000Z"},{id:"remove-quotes",keyNumber:10,shortKeys:["rq","rmq"],name:"Remove Quotes from Lines",slug:"remove-quotes-from-lines",description:"Strip double quotes from the start and end of each line - perfect for cleaning up quoted data, processing CSV exports, or simplifying text lists",category:"Code Formatting",searchRegex:'^"(.+)"$',replaceRegex:"$1",flags:"gm",example:{input:`"apple"
"banana"
"cherry"`,output:`apple
banana
cherry`},isBuiltIn:!0,tags:["quotes","formatting","code"],createdAt:"2023-01-01T00:00:00.000Z",updatedAt:"2023-01-01T00:00:00.000Z"}];class m{patternStorageManager;patterns=[];isInitialized=!1;constructor(){this.patternStorageManager=new p}async initialize(){if(this.isInitialized)return;const e=l,t=await this.patternStorageManager.getAllPatterns();this.patterns=[...e,...t],this.isInitialized=!0}async getAllPatterns(){return await this.ensureInitialized(),this.patterns}async getPatternById(e){return await this.ensureInitialized(),this.patterns.find(t=>t.id===e)}async createPattern(e){await this.ensureInitialized();const t=this.validatePattern(e);if(!t.isValid)throw new Error(`Invalid pattern: ${t.errors?.map(n=>n.message).join(", ")}`);const r=this.generatePatternId(e.name),a=this.generateNextKeyNumber(),s={id:r,keyNumber:a,shortKeys:e.shortKeys||[],...e,tags:e.tags||[],isBuiltIn:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(!this.patternStorageManager.savePattern(s))throw new Error("Failed to save pattern");return this.patterns.push(s),s}async updatePattern(e,t){await this.ensureInitialized();const r=await this.getPatternById(e);if(!r)throw new Error(`Pattern not found: ${e}`);if(r.isBuiltIn)throw new Error("Cannot update built-in patterns");const a={...r,...t,updatedAt:new Date().toISOString()},s=this.validatePattern(a);if(!s.isValid)throw new Error(`Invalid pattern: ${s.errors?.map(i=>i.message).join(", ")}`);if(!this.patternStorageManager.savePattern(a))throw new Error("Failed to update pattern");const n=this.patterns.findIndex(i=>i.id===e);return n>=0&&(this.patterns[n]=a),a}async deletePattern(e){await this.ensureInitialized();const t=await this.getPatternById(e);if(!t)return!1;if(t.isBuiltIn)throw new Error("Cannot delete built-in patterns");return this.patternStorageManager.deletePattern(e)?(this.patterns=this.patterns.filter(a=>a.id!==e),!0):!1}async searchPatterns(e){if(await this.ensureInitialized(),!e)return{patterns:this.patterns,query:""};const t=e.toLowerCase(),r=/^\d+$/.test(t);if(r){const o=parseInt(t,10),n=this.patterns.find(i=>i.keyNumber===o);if(n)return{patterns:[n],query:e}}const a=this.patterns.filter(o=>o.shortKeys.some(n=>n.toLowerCase()===t));return a.length>0?{patterns:a,query:e}:{patterns:this.patterns.filter(o=>o.name.toLowerCase().includes(t)||o.description.toLowerCase().includes(t)||o.tags.some(n=>n.toLowerCase().includes(t))||o.category.toLowerCase().includes(t)||o.shortKeys.some(n=>n.toLowerCase().includes(t))||r&&o.keyNumber.toString().includes(t)),query:e}}async getPatternsByCategory(e){return await this.ensureInitialized(),this.patterns.filter(t=>t.category===e)}async importPatterns(e){await this.ensureInitialized();const t=await this.patternStorageManager.importPatterns(e);if(!t.success)throw new Error(`Import failed: ${t.errors?.join(", ")}`);const r=await this.patternStorageManager.getAllPatterns();return this.patterns=[...l,...r],r}async exportPatterns(){await this.ensureInitialized();const e=this.patterns.filter(t=>!t.isBuiltIn);return JSON.stringify(e,null,2)}validatePattern(e){const t=[];if(e.name?.trim()||t.push({field:"name",message:"Pattern name is required"}),e.description?.trim()||t.push({field:"description",message:"Pattern description is required"}),e.shortKeys&&e.shortKeys.length>0){const r=new Set;for(const a of e.shortKeys){if(!a)continue;const s=a.toLowerCase();a.length>3&&t.push({field:"shortKeys",message:`Short key '${a}' exceeds maximum length of 3 characters`}),/^[a-z0-9]+$/i.test(a)||t.push({field:"shortKeys",message:`Short key '${a}' must contain only alphanumeric characters`}),r.has(s)&&t.push({field:"shortKeys",message:`Duplicate short key '${a}' within the same pattern`}),r.add(s);const o="id"in e?e.id:void 0,n=this.patterns.find(i=>i.id!==o&&i.shortKeys.some(d=>d.toLowerCase()===s));n&&t.push({field:"shortKeys",message:`Short key '${a}' is already used by pattern '${n.name}'`})}}if("searchRegex"in e&&e.searchRegex)try{new RegExp(e.searchRegex,e.flags||"")}catch(r){t.push({field:"searchRegex",message:`Invalid search regex: ${r instanceof Error?r.message:"Unknown error"}`})}return{isValid:t.length===0,errors:t.length>0?t:void 0}}generatePatternId(e){const t=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),r=Date.now().toString(36);return`${t}-${r}`}generateNextKeyNumber(){return this.patterns.length===0?1:Math.max(...this.patterns.map(t=>t.keyNumber||0))+1}async ensureInitialized(){this.isInitialized||await this.initialize()}}class u{isEnabled(){return typeof window<"u"&&typeof window.gtag=="function"}trackEvent(e,t={}){if(this.isEnabled())try{window.gtag("event",e,t)}catch(r){console.warn("Analytics tracking failed:",r)}}patternSelected(e,t,r){this.trackEvent("pattern_selected",{pattern_id:e,pattern_name:t,selection_method:r,event_category:"pattern_interaction"})}patternModified(e,t){this.trackEvent("pattern_modified",{pattern_id:e,modification_type:t,event_category:"pattern_interaction"})}patternReset(e){this.trackEvent("pattern_reset",{pattern_id:e,event_category:"pattern_interaction"})}textTransformed(e,t,r,a){this.trackEvent("text_transformed",{pattern_id:e,input_length:t,output_length:r,execution_time:a,event_category:"transformation"})}transformError(e,t){this.trackEvent("transform_error",{pattern_id:e,error_type:t,event_category:"error"})}patternsImported(e,t){this.trackEvent("patterns_imported",{pattern_count:e,import_method:t,event_category:"pattern_management"})}patternsExported(e,t){this.trackEvent("patterns_exported",{pattern_count:e,export_method:t,event_category:"pattern_management"})}keyboardShortcutUsed(e,t){this.trackEvent("keyboard_shortcut_used",{shortcut:e,action:t,event_category:"ui_interaction"})}commandPaletteOpened(e){this.trackEvent("command_palette_opened",{open_method:e,event_category:"ui_interaction"})}copyActionPerformed(e,t){this.trackEvent("copy_performed",{copy_target:e,copy_method:t,event_category:"ui_interaction"})}patternPageViewed(e,t,r){this.trackEvent("pattern_page_view",{pattern_id:e,pattern_name:t,is_direct_access:r,page_path:window.location.pathname,event_category:"page_navigation"})}patternSearched(e,t){this.trackEvent("pattern_searched",{search_query:e,results_count:t,event_category:"search"})}toolSessionStarted(e){this.trackEvent("tool_session_started",{tool_name:e,event_category:"tool_engagement"})}toolSessionDuration(e,t){this.trackEvent("tool_session_duration",{tool_name:e,duration_seconds:t,event_category:"tool_engagement"})}}const g=new u;export{m as P,g as a};
