import{j as e}from"./jsx-runtime.9DypCmAh.js";import{r as p}from"./index.eCxJ45ll.js";class b{static format(s,o="  "){let t="",l=0,c=!1,i=!1,m=!1;const f=new Set(["{","[","("]),x=new Set(["}","]",")"]),g=()=>{t+=`
`+o.repeat(l)};for(let a=0;a<s.length;a++){const r=s[a];if(m){t+=r,m=!1;continue}if(r==="\\"){t+=r,(c||i)&&(m=!0);continue}if(!i&&r==="'"&&!c){c=!0,t+=r;continue}else if(c&&r==="'"){c=!1,t+=r;continue}if(!c&&r==='"'&&!i){i=!0,t+=r;continue}else if(i&&r==='"'){i=!1,t+=r;continue}if(c||i){t+=r;continue}if(f.has(r)){t+=r,l++;let n=a+1;for(;n<s.length&&/\s/.test(s[n]);)n++;if(!(n<s.length&&x.has(s[n]))){let d=!1;if(r==="("){let h=t.trim();/\b(int|string|float|bool|array|object|resource|NULL)\s*$/.test(h)&&(d=!0)}d||g()}continue}if(x.has(r)){l=Math.max(0,l-1);let n=!1;if(r===")"){let h=t.substring(Math.max(0,t.length-50));/\b(int|string|float|bool|array|object|resource|NULL)\s*\([^)]*$/.test(h)&&(n=!0)}let d="";for(let h=t.length-1;h>=0;h--)if(!/\s/.test(t[h])){d=t[h];break}!f.has(d)&&!n&&(t+=`
`+o.repeat(l)),t+=r;continue}if(r===","){t+=r,g();continue}if(r===":"||r==="="&&a+1<s.length&&s[a+1]===">"){if(r==="="&&s[a+1]===">"){const n=t[t.length-1];n&&n!==" "&&n!==`
`&&(t+=" "),t+="=>",t+=" ",a++}else t+=": ";continue}if(r===`
`){let n=a+1,d=1;for(;n<s.length&&s[n]===`
`;)d++,n++;d>=2?(t.endsWith(`
`)?t.endsWith(`

`)||(t+=`
`):t+=`

`,a=n-1):t.endsWith(`
`)||(t+=`
`,l>0&&(t+=o.repeat(l)));continue}/\s/.test(r)?r===" "&&!t.endsWith(" ")&&!t.endsWith(`
`)&&(t+=r):t+=r}return t}}function j(u){const s=u.trim();if(!s)return"unknown";try{return JSON.parse(s),"json"}catch{}return/\barray\s*\(/i.test(s)||/=>/.test(s)||/\[\s*[^\]]*=>/m.test(s)?/=>\s*(string|int|float|array|object)\s*\(/i.test(s)||/\[\s*"?.+?"?\]\s*=>/m.test(s)?"phpVarDump":"phpArray":/(^|[\s\[{(])'(?:[^'\\]|\\.)*'/.test(s)||/\b(True|False|None)\b/.test(s)||/\((?:[^()]*,)[^()]*\)/.test(s)?"pythonRepr":/\/\/|#/.test(s)||/,\s*[\]}]/.test(s)||/(^|[^\\])'(?:[^'\\]|\\.)*'/.test(s)?"jsonish":"unknown"}function v(u,s){const o=s??j(u);if(o==="json")try{const t=JSON.parse(u);return{output:JSON.stringify(t,null,2),detected:o,stage:"strict-json"}}catch{}return{output:b.format(u),detected:o,stage:"brackets"}}function k(){const[u,s]=p.useState(`Paste anything hereâ€¦

Examples:

// JSON with single quotes
{ 'a': 1, 'b': [1,2,3,], // trailing comma ok
  'user': { 'name': 'Alice', 'active': true, 'email': null } }

# Python repr
{'users': [{'id': 1, 'name': 'Alice'}, {'id': 2, 'name': 'Bob'}], 'ok': True}

// PHP var_export
array ( 'foo' => 'bar', 0 => 10, 'nested' => array( 'x' => 1, 'y' => 2 ), )

// PHP var_dump-ish
array(2) {
  ["id"]=>
  int(42)
  ["tags"]=>
  array(3) { [0]=> string(3) "one" [1]=> string(3) "two" [2]=> string(5) "three" }
}`),[o,t]=p.useState("auto"),[l,c]=p.useState(""),[i,m]=p.useState("unknown"),[f,x]=p.useState("-"),g=()=>{const{output:n,detected:d,stage:h}=v(u,o==="auto"?void 0:o);c(n),m(d),x(h)},a=async()=>{try{await navigator.clipboard.writeText(l||"")}catch{}},r=p.useMemo(()=>({json:"bg-emerald-100 text-emerald-700",jsonish:"bg-emerald-100 text-emerald-700",pythonRepr:"bg-indigo-100 text-indigo-700",phpArray:"bg-amber-100 text-amber-700",phpVarDump:"bg-amber-100 text-amber-700",unknown:"bg-slate-100 text-slate-700"})[i],[i]);return e.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:e.jsxs("div",{className:"mx-auto max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Generic Code Beautifier"}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Paste JSON/JSON5/HJSON, Python ",e.jsx("code",{children:"repr"}),", PHP ",e.jsx("code",{children:"array/print_r/var_export"}),", or even messy",e.jsx("code",{children:" var_dump"}),". We'll try to normalize & pretty-print. For unknown text, we fall back to a smart bracket-based formatter."]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200",children:e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-xs font-medium w-20",children:"Mode"}),e.jsxs("select",{className:"w-full border border-slate-300 rounded-md p-2 bg-white",value:o,onChange:n=>t(n.target.value),children:[e.jsx("option",{value:"auto",children:"Auto-detect"}),e.jsx("option",{value:"json",children:"Force: JSON"}),e.jsx("option",{value:"jsonish",children:"Force: JSON-ish"}),e.jsx("option",{value:"pythonRepr",children:"Force: Python repr"}),e.jsx("option",{value:"phpArray",children:"Force: PHP array"}),e.jsx("option",{value:"phpVarDump",children:"Force: PHP var_dump"}),e.jsx("option",{value:"unknown",children:"Force: Unknown (brackets)"})]})]}),e.jsx("textarea",{className:"h-[360px] w-full font-mono text-sm border border-slate-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",value:u,onChange:n=>s(n.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:g,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3"})}),"Beautify"]}),e.jsxs("button",{onClick:()=>{s(""),c(""),m("unknown"),x("-")},className:"px-4 py-2 border border-slate-300 hover:bg-slate-50 text-slate-700 text-sm font-medium rounded-md transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset"]})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${r}`,children:i}),e.jsxs("span",{className:"text-xs text-slate-500",children:["stage: ",f]})]}),e.jsxs("button",{onClick:a,className:"px-3 py-1 text-sm border border-slate-300 hover:bg-slate-50 text-slate-700 rounded-md transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy output"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200",children:e.jsx("div",{className:"p-4",children:e.jsx("pre",{className:"whitespace-pre-wrap font-mono text-sm leading-6",children:l})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200",children:e.jsxs("div",{className:"p-4 space-y-2 text-sm text-slate-600",children:[e.jsx("div",{className:"font-medium",children:"Notes & Limitations"}),e.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[e.jsx("li",{children:"Python converter handles dicts/lists/tuples, basic scalars. Sets & complex objects are not fully supported."}),e.jsxs("li",{children:["PHP support targets ",e.jsx("code",{children:"array(...)"}),", short arrays ",e.jsx("code",{children:"[...]"}),", and ",e.jsx("code",{children:"print_r/var_export"})," styles. ",e.jsx("code",{children:"var_dump"})," is best-effort."]}),e.jsx("li",{children:"Unknown structures fall back to bracket-based indentation that respects strings and escapes."}),e.jsx("li",{children:"No evaluation of code is performed; everything is string-to-string transforms."})]})]})})]})]})})}export{k as default};
